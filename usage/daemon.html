<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Daemon Mode - Oura</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../installation/index.html"><strong aria-hidden="true">2.</strong> Installation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../installation/binary_release.html"><strong aria-hidden="true">2.1.</strong> Binary Release</a></li><li class="chapter-item expanded "><a href="../installation/from_source.html"><strong aria-hidden="true">2.2.</strong> From Source</a></li><li class="chapter-item expanded "><a href="../installation/docker.html"><strong aria-hidden="true">2.3.</strong> Docker</a></li><li class="chapter-item expanded "><a href="../installation/kubernetes.html"><strong aria-hidden="true">2.4.</strong> Kubernetes</a></li></ol></li><li class="chapter-item expanded "><a href="../usage/index.html"><strong aria-hidden="true">3.</strong> Usage</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../usage/watch.html"><strong aria-hidden="true">3.1.</strong> Watch Mode</a></li><li class="chapter-item expanded "><a href="../usage/daemon.html" class="active"><strong aria-hidden="true">3.2.</strong> Daemon Mode</a></li><li class="chapter-item expanded "><a href="../usage/dump.html"><strong aria-hidden="true">3.3.</strong> Dump Mode</a></li><li class="chapter-item expanded "><a href="../usage/library.html"><strong aria-hidden="true">3.4.</strong> Library</a></li></ol></li><li class="chapter-item expanded "><a href="../filters/index.html"><strong aria-hidden="true">4.</strong> Filters</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../filters/fingerprint.html"><strong aria-hidden="true">4.1.</strong> Fingerprint</a></li><li class="chapter-item expanded "><a href="../filters/selection.html"><strong aria-hidden="true">4.2.</strong> Selection</a></li></ol></li><li class="chapter-item expanded "><a href="../sources/index.html"><strong aria-hidden="true">5.</strong> Sources</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../sources/n2n.html"><strong aria-hidden="true">5.1.</strong> Node-to-Node</a></li><li class="chapter-item expanded "><a href="../sources/n2c.html"><strong aria-hidden="true">5.2.</strong> Node-to-Client</a></li></ol></li><li class="chapter-item expanded "><a href="../sinks/index.html"><strong aria-hidden="true">6.</strong> Sinks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../sinks/terminal.html"><strong aria-hidden="true">6.1.</strong> Terminal</a></li><li class="chapter-item expanded "><a href="../sinks/kafka.html"><strong aria-hidden="true">6.2.</strong> Kafka</a></li><li class="chapter-item expanded "><a href="../sinks/elastic.html"><strong aria-hidden="true">6.3.</strong> Elasticsearch</a></li><li class="chapter-item expanded "><a href="../sinks/webhook.html"><strong aria-hidden="true">6.4.</strong> Webhook</a></li><li class="chapter-item expanded "><a href="../sinks/logs.html"><strong aria-hidden="true">6.5.</strong> Logs</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/index.html"><strong aria-hidden="true">7.</strong> Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/data_dictionary.html"><strong aria-hidden="true">7.1.</strong> Data Dictionary</a></li></ol></li><li class="chapter-item expanded "><a href="../advanced/index.html"><strong aria-hidden="true">8.</strong> Advanced Features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../advanced/stateful_cursor.html"><strong aria-hidden="true">8.1.</strong> Stateful Cursor</a></li><li class="chapter-item expanded "><a href="../advanced/rollback_buffer.html"><strong aria-hidden="true">8.2.</strong> Rollback Buffer</a></li><li class="chapter-item expanded "><a href="../advanced/pipeline_metrics.html"><strong aria-hidden="true">8.3.</strong> Pipeline Metrics</a></li><li class="chapter-item expanded "><a href="../advanced/mapper_options.html"><strong aria-hidden="true">8.4.</strong> Mapper Options</a></li><li class="chapter-item expanded "><a href="../advanced/intersect_options.html"><strong aria-hidden="true">8.5.</strong> Intersect Options</a></li></ol></li><li class="chapter-item expanded "><a href="../guides/index.html"><strong aria-hidden="true">9.</strong> Guides</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../guides/cardano_2_kafka.html"><strong aria-hidden="true">9.1.</strong> Cardano =&gt; Kafka</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Oura</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="daemon-mode"><a class="header" href="#daemon-mode">Daemon Mode</a></h1>
<p><em>Oura's</em> <code>daemon</code> mode processes data in the background, without any live output. This mode is used in scenarios where you need to continuosuly bridge blockchain data with other persistence mechanisms or to trigger an automated process in response to a particular event pattern.</p>
<h2 id="start-daemon-mode"><a class="header" href="#start-daemon-mode">Start Daemon Mode</a></h2>
<p>To start <em>Oura</em> in <em>daemon mode</em>, use the following command:</p>
<pre><code>oura dameon
</code></pre>
<p>By default, <em>Oura</em> will load the configuration values from <code>/etc/oura/daemon.toml</code>.</p>
<p>If you need to specify a different configuration path, use the following command:</p>
<pre><code class="language-sh">oura daemon --config my_config.toml
</code></pre>
<h2 id="configuration"><a class="header" href="#configuration">Configuration</a></h2>
<p>The configuration file needs to specify the source, filters and sink to use in a particular pipeline. The following toml represent the typical skeleton of an <em>Oura</em> config file:</p>
<pre><code class="language-toml">[source]
type = &quot;X&quot; # the type of source to use

# custom config fields for this source type
foo = &quot;abc&quot;
bar = &quot;xyz&quot;

[[filters]]
type = &quot;Y&quot; # the type of filter to use

# custom config fields for this filter type
foo = &quot;123&quot;
bar = &quot;789&quot;

[sink]
# the type of sink to use
type = &quot;Z&quot;

# custom config fields for this sink type
foo = &quot;123&quot;
bar = &quot;789&quot;

# optional cursor settings, remove seaction to disable feature
[cursor]
type = &quot;File&quot;
path = &quot;/var/oura/cursor&quot;
</code></pre>
<h3 id="the-source-section"><a class="header" href="#the-source-section">The <code>source</code> section</a></h3>
<p>This section specifies the origin of the data. The special <code>type</code> field must always be present and containing a value matching any of the available built-in sources. The rest of the fields in the section will depend on the selected <code>type</code>. See the <a href="../sources/index.html">sources</a> section for a list of available options and their corresponding config values.</p>
<h3 id="the-filters-section"><a class="header" href="#the-filters-section">The <code>filters</code> section</a></h3>
<p>This section specifies a collection of filters that are applied in sequence to each event. The sepcial <code>type</code> field must always be present and containing a value matching any of the available built-in filters. Notice that this section of the config is an array, allowing multiple filter sections per config file. See the <a href="../filters/index.html">filters</a> section for a list of available options and their corresponding config values.</p>
<h3 id="the-sink-section"><a class="header" href="#the-sink-section">The <code>sink</code> section</a></h3>
<p>This section specifies the destination of the data. The special <code>type</code> field must always be present and containing a value matching any of the available built-in sinks. The rest of the fields in the section will depend on the selected <code>type</code>. See the <a href="../sinks/index.html">sinks</a> section for a list of available options.</p>
<h3 id="the-cursor-section"><a class="header" href="#the-cursor-section">The <code>cursor</code> section</a></h3>
<p>This section specifies how to configure the <a href="../advanced/stateful_cursor.html">cursor feature</a>. A cursor is a reference of the current position of the pipeline. If the pipeline needs to restart for whatever reason, and a cursor is available, the pipeline will start reading from that point in the chain. Removing the section from the config will disable the cursor feature.</p>
<h3 id="full-example"><a class="header" href="#full-example">Full Example</a></h3>
<p>Here's an example configuration file that uses a Node-to-Node source and output the events into a Kafka sink:</p>
<pre><code class="language-toml">[source]
type = &quot;N2N&quot;
address = [&quot;Tcp&quot;, &quot;relays-new.cardano-mainnet.iohk.io:3001&quot;]
magic = &quot;mainnet&quot;

[[filters]]
type = &quot;Fingerprint&quot;

[[filters]]
type = &quot;Selection&quot;
predicate = &quot;variant_in&quot;
argument = [&quot;Block&quot;, &quot;Transaction&quot;]

[sink]
type = &quot;Kafka&quot;
brokers = [&quot;127.0.0.1:53147&quot;]
topic = &quot;testnet&quot;
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../usage/watch.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../usage/dump.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../usage/watch.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../usage/dump.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
